{% extends "twitterapiapp/base.html" %}

{% block content %}

    <div class="jumbotron">
        <h1>Twitter API Applications</h1>
        <p class="lead">Here are usages of Twitter API developed by <strong><a href="https://github.com/bounswe/bounswe2018group6">BounSWE2018Group6</a></strong>. You can use this web interface, or can make your own API requests.</p>
    </div>

<div class="py-2">

        <h1 class="">Trends by Location <span class="text-muted">(by <a href="https://github.com/cerob">cerob</a>)</span></h1>
        <div class="form-inline my-2">
            <input class="form-control" type="text" placeholder="Where On Earth IDentifier" id="trendsByLocation_woeid">
            <button class="btn btn-primary ml-2" data-url="" id="trendsByLocation_send">Send</button>
        </div>
        <p>Web interface: <code><a href="http://206.189.12.235/trends-by-place/1" id="trendsByLocation_web">http://206.189.12.235/trends-by-place/1</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/trends-by-place/1" id="trendsByLocation_api">http://206.189.12.235/api/trends-by-place/1</a></code></p>
        <p>Gathers trends information by place. Use WOEID (Where On Earth ID).</p>

        <hr>

        <h1 class="mt-1">Find Users <span class="text-muted">(by <a href="https://github.com/kirbiyik">kirbiyik</a>)</span></h1>
        <div class="form-inline my-2">
            <input class="form-control" type="text" placeholder="Search Name" id="findUsers_searchName">
            <button class="btn btn-primary ml-2" data-url="" id="findUsers_send">Send</button>
        </div>
        <p>Web interface: <code><a href="http://206.189.12.235/find_users/search-name" id="findUsers_web">http://206.189.12.235/find_users/search-name</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/find_users/search-name" id="findUsers_api">http://206.189.12.235/api/find_users/search-name</a></code></p>
        <p>Based on your search query it founds most relevant 5 accounts for that search. Then it displays last
        tweet of that 5 accounts, if exists.</p>

        <hr>

        <h1 class="mt-1">Retweet <span class="text-muted">(by <a href="https://github.com/atifemreyuksel">atifemreyuksel</a>)</span></h1>
        <div class="form-inline my-2">
            <input class="form-control" type="text" placeholder="Username" id="retweet_username">
            <button class="btn btn-primary ml-2" data-url="" id="retweet_send">Send</button>
        </div>
        <p>Web interface: <code><a href="http://206.189.12.235/retweet/username" id="retweet_web">http://206.189.12.235/retweet/username</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/retweet/username" id="retweet_api">http://206.189.12.235/api/retweet/username</a></code></p>
        <p>Retweets the last tweet of specified user.</p>

        <hr>

        <h1 class="mt-1">Find Following List of a User <span class="text-muted">(by <a href="https://github.com/mertakozcan">mertakozcan</a>)</span></h1>
        <div class="form-inline my-2">
            <input class="form-control" type="text" placeholder="Username" id="followings_username">
            <input class="form-control ml-2" type="text" placeholder="Count" id="followings_count">
            <button class="btn btn-primary ml-2" data-url="" id="followings_send">Send</button>
        </div>
        <p>Web interface: <code><a href="http://206.189.12.235/followings/screen_name?count=20" id="followings_web">http://206.189.12.235/followings/screen_name?count=20</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/followings/screen_name?count=20" id="followings_api">http://206.189.12.235/api/followings/screen_name?count=20</a></code></p>
        <p>Gets the list of users that the user with given screen name follows. By default, gets last 20 users, however custom number can be set using (optional) 'count' parameter.</p>

        <hr>

        <h1 class="mt-1">Recent Favorite Statistics of a User<span class="text-muted">(by <a href="https://github.com/mfatihm">mfatihm</a>)</span></h1>
        <div class="form-inline my-2">
            <input class="form-control" type="text" placeholder="Username" id="recent_favorites_username">
            <button class="btn btn-primary ml-2" data-url="" id="recent_favorites_send">Send</button>
        </div>
        <p>Web interface: <code><a href="http://206.189.12.235/recent_favorites/screen_name?count=20" id="recent_favorites_web">http://206.189.12.235/recent_favorites/screen_name?count=20</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/recent_favorites/screen_name?count=20" id="recent_favorites_api">http://206.189.12.235/api/recent_favorites/screen_name?count=20</a></code></p>
        <p>Recent Favorite Statistics of a User.</p>

        {% comment "Hide unmerged api documentation." %}
        <hr>

        <h1 class="mt-1">Followers of a User</h1>
        <p>Web interface: <code><a href="http://206.189.12.235/followers/username?count=10">http://206.189.12.235/followers/username?count=10</a></code></p>
        <p>API call: <code><a href="http://206.189.12.235/api/followers/username">http://206.189.12.235/api/followers/username</a></code></p>
        <p>Followers of specified user.</p>
        {% endcomment %}
    </div>

    <script>
        var address_root = "http://206.189.12.235/";
        var address_api_ext = "api/";
        var address_dict = {
            "trendsByLocation": "trends-by-place/",
            "findUsers": "find_users/",
            "retweet": "retweet/",
            "followings": "followings/",
            "recent_favorites": "recent_favorites/"
        };

        onload = function() {

            // trendsByLocation
            trendsByLocation_woeid = document.getElementById('trendsByLocation_woeid');
            trendsByLocation_send = document.getElementById('trendsByLocation_send');
            trendsByLocation_woeid.addEventListener("input", function() {
                var newVal = trendsByLocation_woeid.value;
                changeURIs('trendsByLocation', newVal);
                trendsByLocation_send.setAttribute('data-url', newVal);
            });
            trendsByLocation_send.addEventListener('click', function() {
                window.open(getWebAddress("trendsByLocation") + trendsByLocation_send.getAttribute('data-url'));
            });

            // findUsers
            findUsers_searchName = document.getElementById('findUsers_searchName');
            findUsers_send = document.getElementById('findUsers_send');
            findUsers_searchName.addEventListener("input", function() {
                var newVal = findUsers_searchName.value;
                changeURIs('findUsers', newVal);
                findUsers_send.setAttribute('data-url', newVal);
            });
            findUsers_send.addEventListener("click", function() {
                window.open(getWebAddress("findUsers") + findUsers_send.getAttribute('data-url'));
            });

            // retweet
            retweet_username = document.getElementById('retweet_username');
            retweet_send = document.getElementById('retweet_send');
            retweet_username.addEventListener("input", function() {
                var newVal = retweet_username.value;
                changeURIs('retweet', newVal);
                retweet_send.setAttribute('data-url', newVal);
            });
            retweet_send.addEventListener("click", function() {
                window.open(getWebAddress("retweet") + retweet_send.getAttribute('data-url'));
            });

            // followings
            followings_username = document.getElementById('followings_username');
            followings_count = document.getElementById('followings_count');
            followings_send = document.getElementById('followings_send');
            followings_username.addEventListener("input", function() {
                var newVal = followings_username.value;
                if (followings_count.value) {
                    newVal += '?count=' + followings_count.value;
                }
                changeURIs('followings', newVal);
                followings_send.setAttribute('data-url', newVal);
            });
            followings_count.addEventListener("input", function() {
                var newVal = followings_username.value;
                if (followings_count.value) {
                    newVal += '?count=' + followings_count.value;
                }
                changeURIs('followings', newVal);
                followings_send.setAttribute('data-url', newVal);
            });
            followings_send.addEventListener("click", function() {
                window.open(getWebAddress("followings") + followings_send.getAttribute('data-url'));
            });

            //recent favorites
            recent_favorites_username = document.getElementById('recent_favorites_username');
            recent_favorites_send = document.getElementById('recent_favorites_send');
            recent_favorites_username.addEventListener("input", function() {
                var newVal = recent_favorites_username.value;
                changeURIs('recent_favorites', newVal);
                recent_favorites_send.setAttribute('data-url', newVal);
            });
            recent_favorites_send.addEventListener("click", function() {
                window.open(getWebAddress("recent_favorites") + recent_favorites_send.getAttribute('data-url'));
            });

        };

        // Changes link attributes and texts
        changeURIs = function(id, input) {
            console.log("changed");
            var web = document.getElementById(id + "_web");
            var api = document.getElementById(id + "_api");
            var web_address = getWebAddress(id) + input;
            var api_address = getApiAddress(id) + input;

            web.innerHTML = web_address;
            api.innerHTML = api_address;
            web.href = web_address;
            api.href = api_address;
        };

        getWebAddress = function(id) {
            return address_root + address_dict[id];
        };

        getApiAddress = function(id) {
            return address_root + address_api_ext + address_dict[id];
        };
    </script>
{% endblock %}
